<!DOCTYPE html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Audio Book Master</title><link rel=stylesheet href=index.css><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css><link rel=stylesheet href=bootstrap.min.css></head><body><nav class="navbar navbar-expand-lg navbar-light bg-light"><div class=container><div class="d-flex justify-content-around w-100"><div><h2 class=navbar-brand>Audiobook Master</h2></div><div></div><button class="text-end btn btn-sm btn-primary ml-auto" data-toggle=modal data-target=#addAudiobookModal>Add Audiobook</button></div></div></nav><div class="container mt-3"><div class=row id=audiobooksContainer></div></div><div class="modal fade" id=addAudiobookModal tabindex=-1 role=dialog aria-labelledby=addAudiobookModalLabel aria-hidden=true><div class="modal-dialog modal-dialog-centered" role=document><div class=modal-content><div class=modal-header><h5 class=modal-title id=addAudiobookModalLabel>Add New Audiobook</h5><button type=button class="btn-close btn-danger close" data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button></div><div class=modal-body><form id=addAudiobookForm><div class=form-group><label for=title>Title</label><input class=form-control id=title name=title required></div><div class=form-group><label for=author>Author</label><input class=form-control id=author name=author required></div><div class=form-group><label for=audioUrl>Book Content</label><textarea type=text class=form-control id=audioUrl name=audioUrl required></textarea></div><button type=submit class="btn btn-primary">Add Audiobook</button></form></div></div></div></div><script src=https://code.jquery.com/jquery-3.5.1.slim.min.js></script><script src=https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js></script><script>function fetchAndDisplayAudiobooks(){fetch("http://localhost:5000/api/audiobooks").then(o=>o.json()).then(o=>{const n=document.getElementById("audiobooksContainer");n.innerHTML="",o.forEach(o=>{var e=document.createElement("div"),t=(e.className="col-md-3 col-lg-3 mb-3",o.title.replace(/'/g,""),o.audio_content.replace(/'/g,""));e.innerHTML=`
                                        <div class="card">
                                            <img src="/assets/book.jpeg" class="card-img-top" alt="${o.title}">
                                            <div class="card-body">
                                                <h5 class="card-title">${o.title}</h5>
                                                <p class="card-text">${o.author}</p>
                                                <div class="d-flex align-items-center justify-content-center">
                                                <button class="btn btn-success btn-sm mt-2 mx-2" onclick="readAudiobookTitle('${t}', ${o.id})">Read Book</button>
                                                <button class="btn btn-danger btn-sm mt-2 mx-2" onclick="deleteAudiobook(${o.id})">Delete</button>
                                                <button class="btn btn-info btn-sm mt-2"> <i class="bi bi-info-circle text-white" style="cursor: pointer;" onclick="showAudioUrlPopup('${t}')"></i></button>
                                                </div>
                                            </div>
                                        </div>
                                        `,n.appendChild(e)})}).catch(o=>console.error("Error fetching audiobooks:",o))}function showAudioUrlPopup(o){const e=document.createElement("div");e.className="modal fade",e.innerHTML=`
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Book Content</h5>
                        <button type="button" class="btn-close btn-danger" data-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p>${o}</p>
                    </div>
                </div>
            </div>
        `,document.body.appendChild(e),new bootstrap.Modal(e).show(),e.addEventListener("hidden.bs.modal",function(){document.body.removeChild(e)})}function readAudiobookTitle(o,e){console.log({title:o});var t=window.speechSynthesis,o=new SpeechSynthesisUtterance(o);document.createElement("audio").controls=!0,t.speak(o)}function deleteAudiobook(o){fetch("http://localhost:5000/api/delete_audiobook/"+o,{method:"DELETE"}).then(o=>o.json()).then(o=>{fetchAndDisplayAudiobooks()}).catch(o=>console.error("Error deleting audiobook:",o))}document.getElementById("addAudiobookForm").addEventListener("submit",function(o){o.preventDefault();o=new FormData(o.target);const t={};o.forEach((o,e)=>{t[e]=o}),fetch("http://localhost:5000/api/add_audiobook",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(o=>o.json()).then(o=>{var e=document.getElementById("addAudiobookModal");e&&(e.style.display="none",document.body.classList.remove("modal-open"),e=document.querySelector(".modal-backdrop"))&&e.remove(),fetchAndDisplayAudiobooks()}).catch(o=>console.error("Error adding new audiobook:",o))}),fetchAndDisplayAudiobooks()</script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js></script></body></html>